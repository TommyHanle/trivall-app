<%- include('../partials/header') %>

<body>
<nav>
  <a href="/trips/<%= trip._id %>/stops/new">Add Stop</a>
  <a href="/trips/<%= trip._id %>/arrangements/new">Add a Travel Arragement</a>
  <a href="/trips/<%= trip._id %>/edit">Edit</a>
  <form action="/trips/<%= trip._id %>" method="POST">
    <input type="hidden" name="_method" value="DELETE">
    <input type="submit" value="Delete" onclick="return confirm('Are you sure you want to delete this trip?');">
  </form>
</nav>
<section id="show-page">
  <div>Title: </div>
  <div><%= trip.title %></div>
  <div>Start Date: </div>
  <div><%= trip.startDate %></div>
  <div>End Date: </div>
  <div><%= trip.endDate %></div>
  <div>Location: </div>
  <div><%= trip.location %></div>
  <div>Description: </div>
  <div><%= trip.description %></div>
</section>

<br><br><h2>Stops</h2>
<% if (stops.length) { %>
  <table>
    <thead>
      <tr>
        <th>Title</th>
        <th>Date & Time</th>
        <th>Location</th>
      </tr>
    </thead>
    <tbody>
      <% stops.forEach(function(stop) { %>
        <tr>
          <td><%= stop.title %></td>
          <td><%= stop.dateTime %></td>
          <td><%= stop.location %></td>
          <td><a href="/trips/<%= trip._id %>/stops/<%= stop._id %>">DETAILS</a></td>
          <td>
            <form action="/trips/<%= trip._id %>/stops/<%= stop._id %>" method="POST">
              <input type="hidden" name="_method" value="DELETE">
              <input type="submit" value="Delete" onclick="return confirm('Are you sure you want to delete this stop?');">
            </form>
          </td>          
        </tr>
    <% }); %>
    </tbody>
  </table>
<% } else { %>
  <h5>No Stops Yet</h5>
<% } %>

<br><br><h2>Arrangements</h2>
<% if (arrangements.length) { %>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Date & Time</th>
        <th>Location</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      <% arrangements.forEach(function(arrangement) { %>
        <tr>
          <td><%= arrangement.type %></td>
          <td><%= arrangement.dateTime %></td>
          <td><%= arrangement.location %></td>
          <td><%= arrangement.details %></td>
          <td>
            <form action="/trips/<%= trip._id %>/arrangements/<%= arrangement._id %>" method="POST">
              <input type="hidden" name="_method" value="DELETE">
              <input type="submit" value="Delete" onclick="return confirm('Are you sure you want to delete this arrangement?');">
            </form>
          </td> 
        </tr>
    <% }); %>
    </tbody>
  </table>
<% } else { %>
  <h5>No Travel Arrangements Yet</h5>
<% } %>

<%- include('../partials/footer') %>